<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>테스트</title>
	<link rel="stylesheet" type="text/css" href="test.css"/>
</head>
<body>
<div id="container"></div>
 
<!-- 콜리 스크립트 로딩 -->
<script type="text/javascript" src="http://jindo.dev.naver.com/collie/deploy/collie.min.js"></script>
<script type="text/javascript">
// logo.png 이미지를 로딩한다
collie.ImageManager.addImages({
    "logo" : "http://jindo.dev.naver.com/collie/img/small/logo.png",
    "walking": "http://fc00.deviantart.net/fs71/f/2011/227/e/0/ubira_walking_sprite_by_illeander-d46nb8d.png",
	"soldier" : "soldier.png"
});
 
// 레이어를 만든다
var layer = new collie.Layer({
    width : 640,
    height : 480 * 2
});

var man = new collie.MovableObject({
	width: 32,
	height: 48,
	spriteX : 32,
	spriteY : 48,
	spriteLength: 16,
	velocityX : 10,
	friction : 0.05,  // 마찰력
	backgroundImage : "walking"
}).addTo(layer);

var oCtrlDown = collie.Timer.cycle(man, "12fps", {
	from : 0,
	to : 3
});
oCtrlDown.stop();
var oCtrlUp = collie.Timer.cycle(man, "12fps", {
	from : 12,
	to : 15
});
oCtrlUp.stop();
var oCtrlRight = collie.Timer.cycle(man, "12fps", {
	from : 8,
	to : 11
});
//oCtrlRight.stop();
var oCtrlLeft = collie.Timer.cycle(man, "12fps", {
	from : 4,
	to : 7
});
oCtrlLeft.stop();

document.onkeydown = function(evt){
	switch(evt.keyCode){
		case 37: // left
			oCtrlLeft.start();
			oCtrlRight.stop();
			oCtrlUp.stop();
			oCtrlDown.stop();
			var x = man.get("x");
			man.set("x", x-5); 
		break;
		case 38: // up
			oCtrlLeft.stop();
			oCtrlRight.stop();
			oCtrlUp.start();
			oCtrlDown.stop();
			
			var x = man.get("y");
			man.set("y", x-5); 
			break;
		case 39: // right
			oCtrlLeft.stop();
			oCtrlRight.start();
			oCtrlUp.stop();
			oCtrlDown.stop();
			
			var x = man.get("x");
			man.set("x", x+5); 
			
		break;
		case 40: // down
			oCtrlLeft.stop();
			oCtrlRight.stop();
			oCtrlUp.stop();
			oCtrlDown.start();
			
			var x = man.get("y");
			man.set("y", x+5); 
		break;
	}
}

 
// 레이어를 렌더러에 붙인다
collie.Renderer.addLayer(layer);
 
// 렌더러를 container 아이디의 엘리먼트에 불러온다
collie.Renderer.load(document.getElementById("container"));
 
// 렌더링을 시작한다
collie.Renderer.start();
</script>
</body>
</html>